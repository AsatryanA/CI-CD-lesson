pipeline {
  agent any
  stages {
      stage('SonarQube Analysis'){
            steps{
                withCredentials([string(credentialsId: 'SonarQube', variable: 'SONAR_TOKEN')]) {
                    withSonarQubeEnv(installationName: 'SonarQube', credentialsId: 'SonarQube') { 
                        sh 'mvn clean verify sonar:sonar -Dsonar.projectKey=Sonar-Lesson -Dsonar.host.url=https://localhost:9000'
                        
                    }
                }    
      }
    }
  }
}
